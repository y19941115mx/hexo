---
title: C 语言基础(三) 数组
date: 2019-02-31 23:06:01
tags: [C 语言, 编程入门]
---

现在思考一个问题：用C语言要怎么实现从键盘输入50个整数再进行逆序输出？难道要一口气定义50个int型变量么。
<!-- more -->
### 数组

数组，是一种数据结构，代表的是一组相同类型的数据的集合,可以很方便的存储集合型数据,集合中的数据在内存中按顺序排放。

![数组](/assets/img/array.png)

```c
type arrayName [ arraySize ]; //数组的定义
```

type是数组中元素的类型，可以是一个有效的 C 数据类型。

数组名，是数组的标识符。

```c
/* 初始化数组元素 */         
float balance[5] = {1000.0, 2.0, 3.4, 7.0, 50.0};
int i,j;

/* 修改数组中元素 */         
for ( i = 0; i < 5; i++ )
{
    n[ i ] = i + 100; /* 设置元素 i 为 i + 100 */
}

/* 访问数组中每个元素 */
for (j = 0; j < 5; j++ )
{
    printf("Element[%d] = %f\n", j, n[j] );
}
```
[] 代表数组从首地址偏移再取值，也可以用于指针，括号中的数字d等价于指针递增d次。注意，C语言中的数组取值运算[]，不会检查索引是否越界。

小练习

> 使用数组，解决一开始提到的50个数的键盘输入和逆序输出问题


### 字符串

实际编程中，我们打交道最多的是对字符串的操作，C语言中的字符串实际上是内存中使用 null 字符 '\0' 作为终止标识的一维字符数组，C语言编译器在输出字符串时，只要读到\0字符串，就认为当前字符串已经结束，直接输出前面的所有字符。

如图：定义一个 "Hello" 字符串在内存中的表示

![字符串](/assets/img/string.png)

**注意**：使用双引号定义的字符串，是一个字符串常量，保存在代码段，所以是只读的，无法在程序中修改。

```C
int main()
{
    /* 等价于 char greeting[6] = {'H', 'e', 'l', 'l', 'o', '\0'} 
    是用数组赋值的形式初始化数组 */
    char str1[] = "Hello"; 
    char * str2 = "Hello"; // 指针指向字符串常量 无法修改
    str2 = str1; // 字符串就是数组，同样可以赋值给指针 
}
```


字符串常用操作：
```c
# include <string.h> 
int main ()
{
   char str1[12] = "Hello";
   char str2[12] = "World";
   char str3[12];
   int  len ;
 
   /* 复制 str1 到 str3 */
   strcpy(str3, str1);
   printf("strcpy( str3, str1) :  %s\n", str3 );
 
   /* 连接 str1 和 str2 */
   strcat( str1, str2);
   printf("strcat( str1, str2):   %s\n", str1 );
 
   /* 连接后，str1 的总长度 */
   len = strlen(str1);
   printf("strlen(str1) :  %d\n", len );
   /* 按单词的字典序比较，返回结果 0或>0或<0 */
   strcmp(str1, str2) // 返回小于0的值
   return 0;
   
}

```

#### 字符串的输入输出

读取输入的字符串时，除了可以使用```scanf("%s",str)```外，还可以使用gets(str)。细微的区别在于，scanf进行字符串读入时，遇到空格就提前终止了。使用gets可以读取一整行。

puts(str) 相当于printf("%s\n",str),会在末尾加入换行符。

```c
#include <stdio.h>
 
int main( )
{
   char str[100];
 
   printf( "Enter a value :\n");
   gets( str );
 
   printf( "\nYou entered: ");
   puts( str );
   return 0;
}
```

小练习：
> 键盘输入两行单词，利用strcmp()实现按单词的字典序排序输出。

### 数组与指针

数组是变量的类型，数组变量和其他变量没有什么本质的不同，都代表了内存中的一块区域，数组名即为数组型变量的变量名。

数组比其他变量特殊的情况是，除了sizeof与&操作符，数组在表达式中出现都会自动转换为指向数组首元素的**指针常量**，实际使用中我们通过将数组赋值给指针，进行各种骚操作。

``` c
int a[10] = {1,2,3};
int * p = a;
printf("%d %d", *(p + 1), p[1]);
printf("%p %p", p + 1, a + 1);
```

数组和指针中经常容易弄混的概念:
1. **数组指针**, 是指向数组的**指针**，也叫行指针。对数组变量使用取地址符号&返回的就是指向数组的指针

    ```c
    int a[2][3] = {
        {1,2,3},
        {1,2,3},
        {1,2,3}
    }
    int (*p)[3] // 指向数组长度为3的数组的指针,注意运算符的优先级
    p = a // 将二维数组的首地址传递给指针p
    p++ // 移动二维数组中数组元素对应的字节长度 即每次移动一行
    ```
2. **指针数组**，数组元素全是指针的**数组**

    ```c
    // 数组长度为3的 char型指针 数组
    char * p [3] = {
        "hello",
        "world",
        "!",
    }
    printf("%s", p[2])
    输出： !
    ```

### 课后练习

1. 键盘输入一行字母，实现字母排序后输出。
